<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Dimdim Dino POS</title>

<style>
body{
  margin:0;
  font-family:Arial;
  background:#0f3d2e;
  color:#fff;
}
button{
  width:100%;
  padding:14px;
  margin:8px 0;
  border:none;
  border-radius:10px;
  background:#22c55e;
  font-weight:bold;
  font-size:16px;
}
input{
  width:100%;
  padding:12px;
  margin:6px 0;
  border-radius:8px;
  border:none;
}
.card{
  background:#134e3a;
  margin:14px;
  padding:16px;
  border-radius:14px;
}
header{
  padding:16px;
  text-align:center;
  font-weight:bold;
  font-size:20px;
}
.hidden{display:none}
.menu-grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}
.menu-item{
  background:#22c55e;
  color:#000;
  padding:14px;
  border-radius:12px;
  text-align:center;
  font-weight:bold;
}
hr{border:1px solid #1f6f55}
</style>
</head>

<body>

<header>DIMDIM DINO POS</header>

<!-- HOME -->
<div id="home" class="card">
  <button onclick="openKasir()">KASIR</button>
  <button onclick="openMenu()">DAFTAR MENU</button>
</div>

<!-- DAFTAR MENU -->
<div id="menuPage" class="card hidden">
  <h3>Daftar Menu</h3>
  <input id="menuName" placeholder="Nama menu">
  <input id="menuPrice" type="number" placeholder="Harga">
  <button onclick="addMenu()">Simpan Menu</button>
  <div id="menuList"></div>
  <button onclick="back()">Kembali</button>
</div>

<!-- KASIR -->
<div id="kasirPage" class="card hidden">
  <h3>Kasir</h3>
  <p>Order Type: <b id="orderType">QRIS</b></p>

  <div class="menu-grid" id="menuButtons"></div>

  <hr>
  <div id="cart"></div>
  <h3>Total: Rp <span id="total">0</span></h3>

  <button onclick="printReceipt()">CETAK STRUK</button>
  <button onclick="back()">Kembali</button>
</div>

<script>
let menus = JSON.parse(localStorage.getItem('menus')) || [];
let cart = [];
let total = 0;

function saveMenus(){
  localStorage.setItem('menus',JSON.stringify(menus));
}

function openMenu(){
  home.classList.add('hidden');
  menuPage.classList.remove('hidden');
  renderMenuList();
}

function openKasir(){
  home.classList.add('hidden');
  kasirPage.classList.remove('hidden');
  renderKasirMenu();
}

function back(){
  location.reload();
}

function addMenu(){
  menus.push({
    name:menuName.value,
    price:Number(menuPrice.value)
  });
  saveMenus();
  menuName.value='';
  menuPrice.value='';
  renderMenuList();
}

function renderMenuList(){
  menuList.innerHTML='';
  menus.forEach(m=>{
    menuList.innerHTML+=`<p>${m.name} - Rp ${m.price.toLocaleString()}</p>`;
  });
}

function renderKasirMenu(){
  menuButtons.innerHTML='';
  menus.forEach(m=>{
    menuButtons.innerHTML+=`
      <div class="menu-item" onclick="addCart('${m.name}',${m.price})">
        ${m.name}<br>Rp ${m.price.toLocaleString()}
      </div>`;
  });
}

function addCart(name,price){
  cart.push({name,price});
  total+=price;
  renderCart();
}

function renderCart(){
  cart.innerHTML='';
  document.getElementById('cart').innerHTML='';
  cart.forEach(i=>{
    document.getElementById('cart').innerHTML+=
      `<div>${i.name} <span style="float:right">Rp ${i.price.toLocaleString()}</span></div>`;
  });
  document.getElementById('total').innerText=total.toLocaleString();
}

function printReceipt(){
  let win=window.open('','','width=300');
  win.document.write(`
  <style>
  body{font-family:monospace;font-size:12px}
  .r{text-align:right}
  </style>

  <center><b>DIMDIM DINO</b></center>
  <center>--------------------</center>
  <p>No: ${Date.now()}</p>
  <p>${new Date().toLocaleString()}</p>
  <p>Order: QRIS</p>
  <center>--------------------</center>

  ${cart.map(i=>`
    <div>${i.name}<span style="float:right">${i.price.toLocaleString()}</span></div>
  `).join('')}

  <center>--------------------</center>
  <b>Total<span style="float:right">${total.toLocaleString()}</span></b>
  <center>--------------------</center>
  <center>Terima Kasih</center>
  `);
  win.print();
  win.close();
}
</script>

</body>
</html>
